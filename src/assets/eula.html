<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; frame-src 'self'; style-src 'unsafe-inline'; script-src 'unsafe-inline';">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .boxed {
      display: flex;
      flex-flow: column;
    }
  </style>
</head>
<body>
  <div id="Content">
    <div class="boxed">
      <div id="lipsum">
        <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla vehicula nunc id urna convallis fermentum. Ut iaculis massa sed nunc cursus, eget tristique purus rhoncus. Vivamus nec condimentum magna, at laoreet urna. Sed sed turpis in diam convallis rutrum. Donec sit amet sem lectus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum id vulputate ipsum, at vestibulum ipsum. Duis sed purus et augue hendrerit dignissim ut ut ante. Etiam tristique, lectus vitae aliquet blandit, odio lacus pellentesque nulla, at fermentum erat nisi ut ante. Morbi vehicula nulla quis volutpat laoreet. Phasellus eget purus tempor, accumsan nunc at, tempus ligula. Donec vel nibh molestie, semper lectus id, imperdiet justo.
        </p>
        <p>
        Interdum et malesuada fames ac ante ipsum primis in faucibus. Nam pharetra felis dictum urna pretium, quis porta metus posuere. Duis dignissim iaculis nisl, faucibus hendrerit mi. Phasellus non efficitur sapien, facilisis rutrum nulla. Quisque commodo, dolor nec tincidunt ultrices, enim nulla consequat libero, ac accumsan purus sapien non velit. Nunc erat massa, tincidunt non rutrum in, dapibus a risus. Mauris placerat nisl feugiat eros convallis feugiat. Duis quis consequat purus. Sed molestie, est et ultricies molestie, risus neque auctor quam, vel feugiat leo nunc non ante. Pellentesque vel fringilla risus. Quisque ultrices eleifend massa, vel facilisis magna venenatis vitae. Nunc sem ex, facilisis non fringilla sed, rutrum sit amet velit.
        </p>
        <p>
        Phasellus mollis arcu vel neque iaculis, finibus pellentesque eros pellentesque. Nunc ipsum quam, lobortis id ligula sit amet, dictum mollis massa. Ut at nibh libero. Donec varius ac magna a eleifend. Curabitur luctus, neque vitae tincidunt volutpat, risus magna euismod nisi, sit amet dictum augue ligula sed purus. Maecenas facilisis faucibus sapien at ornare. Sed placerat feugiat lectus, in consequat sem cursus sit amet.
        </p>
        <p>
        Integer augue dui, laoreet eu lectus vitae, iaculis accumsan sem. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Etiam ligula justo, tincidunt rhoncus varius sed, molestie et lacus. Sed lacus risus, hendrerit a libero cursus, malesuada dignissim lectus. Nullam ut faucibus ex, sed auctor velit. Nunc efficitur orci pretium lorem fermentum, vitae euismod ex tempor. Sed molestie tristique mauris et pretium. Nullam feugiat ipsum eu purus facilisis, quis laoreet tellus sodales. Aenean lacinia dictum ante et tincidunt. Sed fringilla eros at dolor blandit, efficitur rutrum metus malesuada.
        </p>
        <p>
        Curabitur mollis porttitor urna id porttitor. Curabitur a dignissim mauris. Etiam congue neque eu lacus fringilla, ut laoreet felis sagittis. Nulla facilisi. Donec eget placerat risus. Donec consequat erat ex, nec semper metus rutrum sit amet. Suspendisse feugiat, justo in ullamcorper bibendum, nibh augue vehicula sem, sit amet tincidunt nisl dolor eget felis. In elementum nibh a ex tempus gravida. Proin sodales id lectus et gravida.
        </p>
        <p>
        Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Mauris quis mi tempor, pharetra urna eu, aliquet ligula. Nam rutrum lacinia imperdiet. Curabitur sodales nunc ut accumsan venenatis. Quisque tincidunt ipsum eu lorem pretium, id laoreet ante dictum. Integer vel ipsum pretium, pellentesque nisi vitae, euismod ligula. Suspendisse in metus in eros posuere egestas id ac nibh. Fusce eu nulla vel sem sagittis iaculis vel sit amet lacus. Nam iaculis placerat augue, quis porttitor mi interdum at. Proin tincidunt iaculis tincidunt. Praesent nec purus quis nibh finibus dapibus. Proin in tortor odio. Integer in facilisis libero, at dignissim felis. Vivamus aliquet lectus nec diam laoreet aliquam. Suspendisse rhoncus nisi in augue dapibus, ut fermentum diam rhoncus.
        </p>
        <p>
        Cras vestibulum metus fringilla pellentesque consectetur. Pellentesque sit amet lacus ac erat consectetur luctus ut et dolor. Sed ac lobortis diam. Nunc eleifend posuere arcu, ac ullamcorper nibh venenatis eu. Integer fringilla malesuada diam. Sed placerat lacus id ipsum pulvinar pretium. Fusce eget lorem turpis. Proin massa lectus, aliquet vitae blandit fringilla, auctor at ex. Maecenas elementum vestibulum ex in aliquet. Integer in sem eu quam vulputate convallis. Maecenas consectetur a turpis et mollis.
        </p>
        <p>
        Suspendisse risus mauris, maximus eget purus quis, pharetra consequat arcu. Integer fermentum orci vel arcu lacinia consectetur in in dolor. Mauris aliquam efficitur augue, et euismod ipsum rhoncus eget. Suspendisse potenti. Donec leo urna, facilisis at tincidunt ac, ornare ut felis. Curabitur sagittis diam nisl, et gravida nibh fermentum eu. Cras sed massa posuere, mattis turpis ac, commodo nulla. Morbi eget mauris mattis, consequat dui vitae, ornare diam. Quisque aliquet leo eget pretium accumsan.
        </p>
        <p>
        Donec ac odio sapien. Proin vel neque volutpat, condimentum odio ac, sagittis sem. Donec nec volutpat est. Sed nec vestibulum nunc, id porttitor velit. Vestibulum vel aliquet sapien. Duis blandit libero non dictum ullamcorper. Etiam varius risus vitae placerat tincidunt. Nullam at libero orci. Aenean a dictum justo. Donec erat eros, posuere et bibendum in, dictum nec dolor. Cras hendrerit erat arcu, eget facilisis urna vehicula eget. Aliquam pellentesque metus sed enim tincidunt laoreet. Suspendisse egestas iaculis euismod. Maecenas blandit molestie tincidunt. Praesent quis risus sed sem scelerisque convallis.
        </p>
        <p>
        Praesent semper enim non dui egestas ullamcorper. Mauris in gravida quam. Vivamus ac lacinia eros. Nunc efficitur ante ut vulputate aliquam. Sed convallis elit nisl. Integer mattis purus tellus, ac finibus urna sagittis luctus. Phasellus ac sagittis sem. Donec tempus rutrum ante posuere pretium. Nullam dignissim, lacus id semper faucibus, diam ex feugiat lectus, at venenatis lacus quam interdum tortor. Etiam venenatis lectus ac quam condimentum scelerisque. Vivamus vitae tincidunt arcu. Donec sit amet nisi at justo blandit imperdiet sit amet et nunc. Aliquam sollicitudin cursus facilisis.
        </p></div>
    </div>
  </div>
  <script type="text/javascript">
    const qp = new URLSearchParams(location.search.slice(1));
    const targetOrigin = qp.get('o') || 'http://localhost:8100';
    console.log('targetOrigin', targetOrigin);
    document.addEventListener('scroll', (e) => {
      const scrollingElement = document.scrollingElement;
      const hasScrolledToEnd = (scrollingElement.scrollTop + scrollingElement.clientHeight) >= scrollingElement.scrollHeight;
      top.postMessage({hasScrolledToEnd}, targetOrigin);
    });
  </script>
</body>
</html>
